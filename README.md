# Test-Maxmoll

## Реализация проекта

1-я часть вополненна полностью по требованиям задания, созданы соответствуующие методы для реализации Rest API и маршруты для них. 

Для реализации 2-й части задания создана модель `StockMovement` и контроллер `StockMovementController` с двумя методами которые,
реализуют просмотр истории движения товаров и внесение записей о перемещении товаров со склада и на склад.

Для реализации 3-й части задания написан `ComplexSeeder` и фабрики для всех моделей. 

## Развертывание проекта

Клонируйте проект:
```shell
git clone https://github.com/Valentin-Ivlev/test-maxmoll.git
```
Установите зависимости проекта:
```shell
composer install
```
Создайте свой файл настроек:
```shell
cp .env.example .env
```
Сгенерируйте ключ приложения:
```shell
php artisan key:generate
```
Настройете подключение к базе данных в файле `.env`

Установите правильные права на папки проекта:
```shell
chmod 755 -R [путь к папке проекта]/
chmod -R o+w [путь к папке проекта]/storage
```
Настройте web-сервер, чтобы он указывал на папку `[путь к папке проекта]/public/`

Очистите проект:
```shell
php artisan cache:clear
php artisan route:clear
php artisan config:clear
```
Выполните миграции:
```shell
php artisan migrate
```
Заполните БД начальными данными:
```shell
php artisan db:seed
```
## Задание
### Общие требования к выполнению заданий
<i>
Язык - PHP. Обязательная разбивка структуры кода по принципу MVC и использование классов и моделей. Фреймворк - любой, но желательно Laravel.
База данных - MySQL или MariaDB. 
Код должен быть прокомментирован (блоки внутри методов, условия, а также PHPDoc у самих методов). 

Исходный код необходимо разместить в GIT (любой репозиторий на выбор) и выдать доступ.

Возможно будут заданы вопросы по обоснованию выбранного решения задач (архитектура, структура, фреймворк, качество кода и т.д.) или требования по доработке решения.
</i>
### Задание
<i>
Дана следующая схема таблиц:
<pre>
Таблица products
Поля:
id - unsigned big integer, AI, pk
name -  varchar(255)
price - float
</pre>
<pre>
Таблица orders
Поля:
id - unsigned big integer, AI, pk
customer - varchar(255) (имя клиента)
created_at - timestamp
completed at - timestamp
warehouse_id - unsigned big integer, fk
status - varchar(255) (“active”, “completed”, “canceled”)
</pre>
<pre>
Таблица order_items
Поля:
id - unsigned big integer, AI, pk
order_id - unsigned big integer, fk
product_id - unsigned big integer, fk
count - integer
</pre>
<pre>
Таблица warehouses
Поля:
id - unsigned big integer, AI, pk
name - varchar(255)
</pre>
<pre>
Таблица stocks
Поля:
product_id - fk
warehouse_id - fk
stock - integer
</pre>
…и мы пишем микро-црм для торговли.
</i>

### Часть 1
<i>
Требуется реализовать набор Rest-методов, которые позволят:

- Просмотреть список складов
- Просмотреть список товаров с их остатками по складам
- Получить список заказов (с фильтрами и настраиваемой пагинацией)
- Создать заказ (в заказе может быть несколько позиций с разным количеством)
- Обновить заказ (данные покупателя и список позиций, но не статус)
- Завершить заказ
- Отменить заказ
- Возобновить заказ (перевод из отмены в работу)

Товары должны корректно списываться\возвращаться на остаток.

Важно: если операцию невозможно выполнить (возврат в работу заказа, когда товаров уже нет), необходимо вернуть ошибку.

СХЕМЫ УКАЗАННЫХ ТАБЛИЦ МЕНЯТЬ НЕЛЬЗЯ!
</i>

### Часть 2
<i>
Требуется реализовать историю движений товаров

Движение - любое изменение количества товара на остатке склада.

После выполнения первой части, её необходимо доработать. Требуется создать таблицу движений и модель, которые позволят реализовать Rest-метод для просмотра историй изменения остатков товаров.

Метод должен поддерживать фильтры (по складку, по товару, по датам), а также настраиваемую пагинацию.
</i>

### Часть 3
<i>
Справочники товаров, складов и остатков необходимо наполнить готовыми тестовыми данными. Наполнение должно происходить путём вызова консольной команды.****
</i>
